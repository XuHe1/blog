---
title: Linux 进程虚拟地址空间
date: 2018-09-27 11:07:41
tags:
    - Linux
    - OS
---
### 进程与线程
进程与线程属于操作系统知识范畴，这里仅仅做个概述：
> * 程序：存储在磁盘上某个目录中的可执行文件。
> * 进程：程序的执行实例，如word程序，运行后就是一个word进程，是**资源分配的最小单位**
> * 线程：**程序执行的最小单位**，一个进程内的多个线程共享同一地址空间。
> * 1个程序 ==> 1个进程==> n个线程
<!-- more -->
### linux内存管理
内存管理是个很复杂的过程，如果展开来说不是一篇文章就能说得清楚的，这里仅仅为进程空间做个背景介绍：
>
* 虚拟内存：
* 系统调用：程序向内核请求服务的入口点。
	- 不同OS不同版本提供的系统调用个数不同；
	- linux为每个系统调用在标准C库里提供一个同名称的函数，函数再进行系统调用；
	- 从应用角度考虑，可将系统调用视为库函数；但库函数并不是内核的入口点。
	

### 进程虚拟地址空间
既然进程是程序运行时资源分配的最小单位，每个程序在运行时，OS会统一分配内存，所以进程的虚拟内存大小随OS不同而不同：

> 32位操作系统，4G虚拟地址空间
> 64位操作系统，几十G上百G

进程虚拟地址结构：
	每个进程的虚拟地址空间包含两部分，一部分是所有进程共享的空间，称为内核地址空间，映射到固定的物理内存；另一部分则是每个尽责独享的空间，称为用户空间。
	
![](http://blog.lovezhangli.top/pics/linux-process.jpg)
